<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¿„ç½—æ–¯æ–¹å—</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="game-container">
        <div class="game-board" id="game-board">
          <canvas id="game-canvas" width="300" height="600"></canvas>
          <canvas id="player-canvas" width="120" height="120"></canvas>
          <div class="game-overlay" id="game-overlay">
            <h2 class="overlay-title">ä¿„ç½—æ–¯æ–¹å—</h2>
            <p class="overlay-text">
              ä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨å’Œæ—‹è½¬æ–¹å—ï¼Œå¡«æ»¡æ•´è¡Œå³å¯æ¶ˆé™¤
            </p>
            <button class="btn" id="start-btn">å¼€å§‹æ¸¸æˆ</button>
          </div>
        </div>

        <div class="game-info">
          <div class="info-panel">
            <p style="text-align: center; color: #616161">åˆ†æ•°</p>
            <div class="panel-content" id="score">0</div>
          </div>

          <div class="info-panel">
            <p style="text-align: center; color: #616161">ç­‰çº§</p>
            <div class="panel-content" id="level">1</div>
            <p style="text-align: center; color: #616161">é€Ÿåº¦éšç­‰çº§æå‡</p>
          </div>

          <div class="info-panel">
            <p style="text-align: center; color: #616161">ä¸‹ä¸€ä¸ªæ–¹å—</p>
            <div class="next-piece">
              <canvas id="next-piece-canvas" width="120" height="120"></canvas>
            </div>
          </div>
        </div>

        <div class="game-info">
          <div class="info-panel">
            <h3 class="panel-title">æ§åˆ¶</h3>
            <div class="controls">
              <div class="key-item">
                <button class="control-btn" id="drop-btn">
                  <span class="control-emoji">â¬</span>
                </button>
                <div class="key-label">space</div>
              </div>
              <div class="key-item">
                <button class="control-btn" id="rotate-btn">
                  <span class="control-emoji">ğŸ”„</span>
                </button>
                <div class="key-label">â†‘</div>
              </div>
              <div class="key-item">
                <button class="control-btn" id="pause-btn">
                  <span class="control-emoji">â¸ï¸</span>
                </button>
                <div class="key-label">P</div>
              </div>
              <div class="key-item">
                <button class="control-btn" id="left-btn">
                  <span class="control-emoji">â¬…ï¸</span>
                </button>
                <div class="key-label">â†</div>
              </div>
              <div class="key-item">
                <button class="control-btn" id="down-btn">
                  <span class="control-emoji">â¬‡ï¸</span>
                </button>
                <div class="key-label">â†“</div>
              </div>
              <div class="key-item">
                <button class="control-btn" id="right-btn">
                  <span class="control-emoji">â¡ï¸</span>
                </button>
                <div class="key-label">â†’</div>
              </div>
            </div>
          </div>

          <div class="info-panel">
            <p style="color: #616161">è‡ªåŠ¨è¿›è¡Œæ¸¸æˆ</p>
            <br />
            <div style="text-align: center">
              <label class="switch">
                <input type="checkbox" id="algorithmSwitch" />
                <span class="slider round"></span>
              </label>
              <div style="color: #616161" class="status-text" id="statusText">
                å…³é—­
              </div>
            </div>
          </div>

          <div class="info-panel">
            <div style="color: #616161">
              éš¾åº¦: <span id="sliderValue">0</span>
            </div>
            <div class="slider-container">
              <input
                type="range"
                id="difficultySlider"
                class="slider"
                min="-1"
                max="1"
                step="0.2"
                value="0"
              />

              <div class="tick-marks">
                <div class="tick" data-value="æ˜“"></div>
                <div class="tick" data-value="ä¸­"></div>
                <div class="tick" data-value="éš¾"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="./script.js" defer></script>
    <script src="./algorithm.js" defer></script>
    <script>
      // è·å–ç®—æ³•å¼€å…³å…ƒç´ 
      const algorithmSwitch = document.getElementById("algorithmSwitch");
      algorithmSwitch.checked = false; // é»˜è®¤å…³é—­
      // è·å–çŠ¶æ€æ˜¾ç¤ºæ–‡æœ¬
      const statusText = document.getElementById("statusText");

      // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
      algorithmSwitch.addEventListener("change", function () {
        algorithmActive = this.checked;
        statusText.textContent = algorithmActive ? "å¼€å¯" : "å…³é—­";
      });

      // éš¾åº¦æ»‘å—
      const slider = document.getElementById("difficultySlider");
      const sliderValue = document.getElementById("sliderValue");

      // åˆå§‹éš¾åº¦å€¼
      slider.value = "0";

      // æ˜¾ç¤ºåˆå§‹å€¼
      sliderValue.textContent = slider.value;

      // ç›‘å¬æ»‘æ¡å˜åŒ–
      slider.addEventListener("input", function () {
        // ç”±äºè®¾ç½®äº†step="0.2"ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸é™„åˆ°æœ€è¿‘çš„0.2å€æ•°
        sliderValue.textContent = this.value;
        difficulty = parseFloat(this.value);
      });
    </script>
  </body>
</html>
